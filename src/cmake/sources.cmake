# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

# Group the core client sources together into an interface library.
# This allows us to pull them into multiple builds like the dummy client.
add_library(mozillavpn-sources INTERFACE)

if(NOT MSVC AND NOT IOS)
  target_compile_options(mozillavpn-sources INTERFACE -Wall -Werror -Wno-conversion)
endif()

# VPN client include paths
set_property(TARGET mozillavpn-sources PROPERTY INTERFACE_INCLUDE_DIRECTORIES
    ${CMAKE_CURRENT_SOURCE_DIR}
    ${CMAKE_CURRENT_SOURCE_DIR}/addons
    ${CMAKE_CURRENT_SOURCE_DIR}/composer
    ${CMAKE_CURRENT_SOURCE_DIR}/hacl-star
    ${CMAKE_CURRENT_SOURCE_DIR}/hacl-star/kremlin
    ${CMAKE_CURRENT_SOURCE_DIR}/hacl-star/kremlin/minimal
    ${CMAKE_CURRENT_SOURCE_DIR}/glean
    ${CMAKE_CURRENT_BINARY_DIR}
)

# Generated version header file
configure_file(version.h.in ${CMAKE_CURRENT_BINARY_DIR}/version.h)
target_sources(mozillavpn-sources INTERFACE ${CMAKE_CURRENT_BINARY_DIR}/version.h)

# VPN Client source files
target_sources(mozillavpn-sources INTERFACE
    ${CMAKE_CURRENT_SOURCE_DIR}/featurelistcallback.h
    ${CMAKE_CURRENT_SOURCE_DIR}/featurelist.h
    ${CMAKE_CURRENT_SOURCE_DIR}/appimageprovider.h
    ${CMAKE_CURRENT_SOURCE_DIR}/applistprovider.h
    ${CMAKE_CURRENT_SOURCE_DIR}/apppermission.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/apppermission.h
    ${CMAKE_CURRENT_SOURCE_DIR}/settingslist.h
    ${CMAKE_CURRENT_SOURCE_DIR}/captiveportal/captiveportal.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/captiveportal/captiveportal.h
    ${CMAKE_CURRENT_SOURCE_DIR}/captiveportal/captiveportaldetection.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/captiveportal/captiveportaldetection.h
    ${CMAKE_CURRENT_SOURCE_DIR}/captiveportal/captiveportaldetectionimpl.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/captiveportal/captiveportaldetectionimpl.h
    ${CMAKE_CURRENT_SOURCE_DIR}/captiveportal/captiveportalmonitor.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/captiveportal/captiveportalmonitor.h
    ${CMAKE_CURRENT_SOURCE_DIR}/captiveportal/captiveportalnotifier.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/captiveportal/captiveportalnotifier.h
    ${CMAKE_CURRENT_SOURCE_DIR}/captiveportal/captiveportalrequest.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/captiveportal/captiveportalrequest.h
    ${CMAKE_CURRENT_SOURCE_DIR}/captiveportal/captiveportalrequesttask.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/captiveportal/captiveportalrequesttask.h
    ${CMAKE_CURRENT_SOURCE_DIR}/command.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/command.h
    ${CMAKE_CURRENT_SOURCE_DIR}/commandlineparser.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/commandlineparser.h
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commandactivate.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commandactivate.h
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commanddeactivate.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commanddeactivate.h
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commanddevice.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commanddevice.h
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commandexcludeip.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commandexcludeip.h
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commandlogin.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commandlogin.h
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commandlogout.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commandlogout.h
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commandselect.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commandselect.h
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commandservers.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commandservers.h
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commandstatus.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commandstatus.h
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commandui.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commandui.h
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commandwgconf.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/commands/commandwgconf.h
    ${CMAKE_CURRENT_SOURCE_DIR}/connectionbenchmark/benchmarktask.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/connectionbenchmark/benchmarktask.h
    ${CMAKE_CURRENT_SOURCE_DIR}/connectionbenchmark/benchmarktaskping.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/connectionbenchmark/benchmarktaskping.h
    ${CMAKE_CURRENT_SOURCE_DIR}/connectionbenchmark/benchmarktasksentinel.h
    ${CMAKE_CURRENT_SOURCE_DIR}/connectionbenchmark/benchmarktasktransfer.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/connectionbenchmark/benchmarktasktransfer.h
    ${CMAKE_CURRENT_SOURCE_DIR}/connectionbenchmark/connectionbenchmark.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/connectionbenchmark/connectionbenchmark.h
    ${CMAKE_CURRENT_SOURCE_DIR}/connectionbenchmark/uploaddatagenerator.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/connectionbenchmark/uploaddatagenerator.h
    ${CMAKE_CURRENT_SOURCE_DIR}/connectionhealth.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/connectionhealth.h
    ${CMAKE_CURRENT_SOURCE_DIR}/constants.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/constants.h
    ${CMAKE_CURRENT_SOURCE_DIR}/controller.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/controller.h
    ${CMAKE_CURRENT_SOURCE_DIR}/controllerimpl.h
    ${CMAKE_CURRENT_SOURCE_DIR}/dnshelper.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/dnshelper.h
    ${CMAKE_CURRENT_SOURCE_DIR}/dnspingsender.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/dnspingsender.h
    ${CMAKE_CURRENT_SOURCE_DIR}/extrastrings.h
    ${CMAKE_CURRENT_SOURCE_DIR}/imageproviderfactory.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/imageproviderfactory.h
    ${CMAKE_CURRENT_SOURCE_DIR}/interfaceconfig.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/interfaceconfig.h
    ${CMAKE_CURRENT_SOURCE_DIR}/ipaddresslookup.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ipaddresslookup.h
    ${CMAKE_CURRENT_SOURCE_DIR}/keyregenerator.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/keyregenerator.h
    ${CMAKE_CURRENT_SOURCE_DIR}/main.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/models/device.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/models/device.h
    ${CMAKE_CURRENT_SOURCE_DIR}/models/devicemodel.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/models/devicemodel.h
    ${CMAKE_CURRENT_SOURCE_DIR}/models/keys.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/models/keys.h
    ${CMAKE_CURRENT_SOURCE_DIR}/models/location.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/models/location.h
    ${CMAKE_CURRENT_SOURCE_DIR}/models/recentconnections.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/models/recentconnections.h
    ${CMAKE_CURRENT_SOURCE_DIR}/models/recommendedlocationmodel.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/models/recommendedlocationmodel.h
    ${CMAKE_CURRENT_SOURCE_DIR}/models/server.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/models/server.h
    ${CMAKE_CURRENT_SOURCE_DIR}/models/servercity.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/models/servercity.h
    ${CMAKE_CURRENT_SOURCE_DIR}/models/servercountry.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/models/servercountry.h
    ${CMAKE_CURRENT_SOURCE_DIR}/models/servercountrymodel.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/models/servercountrymodel.h
    ${CMAKE_CURRENT_SOURCE_DIR}/models/serverdata.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/models/serverdata.h
    ${CMAKE_CURRENT_SOURCE_DIR}/models/subscriptiondata.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/models/subscriptiondata.h
    ${CMAKE_CURRENT_SOURCE_DIR}/models/supportcategorymodel.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/models/supportcategorymodel.h
    ${CMAKE_CURRENT_SOURCE_DIR}/models/user.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/models/user.h
    ${CMAKE_CURRENT_SOURCE_DIR}/mozillavpn.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/mozillavpn.h
    ${CMAKE_CURRENT_SOURCE_DIR}/mozillavpn_p.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/mozillavpn_p.h
    ${CMAKE_CURRENT_SOURCE_DIR}/networkwatcher.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/networkwatcher.h
    ${CMAKE_CURRENT_SOURCE_DIR}/networkwatcherimpl.h
    ${CMAKE_CURRENT_SOURCE_DIR}/notificationhandler.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/notificationhandler.h
    ${CMAKE_CURRENT_SOURCE_DIR}/pinghelper.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/pinghelper.h
    ${CMAKE_CURRENT_SOURCE_DIR}/pingsender.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/pingsender.h
    ${CMAKE_CURRENT_SOURCE_DIR}/pingsenderfactory.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/pingsenderfactory.h
    ${CMAKE_CURRENT_SOURCE_DIR}/platforms/dummy/dummyapplistprovider.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/platforms/dummy/dummyapplistprovider.h
    ${CMAKE_CURRENT_SOURCE_DIR}/platforms/dummy/dummynetworkwatcher.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/platforms/dummy/dummynetworkwatcher.h
    ${CMAKE_CURRENT_SOURCE_DIR}/platforms/dummy/dummypingsender.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/platforms/dummy/dummypingsender.h
    ${CMAKE_CURRENT_SOURCE_DIR}/productshandler.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/productshandler.h
    ${CMAKE_CURRENT_SOURCE_DIR}/profileflow.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/profileflow.h
    ${CMAKE_CURRENT_SOURCE_DIR}/purchasehandler.h
    ${CMAKE_CURRENT_SOURCE_DIR}/purchasehandler.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/purchaseiaphandler.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/purchaseiaphandler.h
    ${CMAKE_CURRENT_SOURCE_DIR}/purchasewebhandler.h
    ${CMAKE_CURRENT_SOURCE_DIR}/purchasewebhandler.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/releasemonitor.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/releasemonitor.h
    ${CMAKE_CURRENT_SOURCE_DIR}/serveri18n.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/serveri18n.h
    ${CMAKE_CURRENT_SOURCE_DIR}/serverlatency.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/serverlatency.h
    ${CMAKE_CURRENT_SOURCE_DIR}/settingswatcher.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/settingswatcher.h
    ${CMAKE_CURRENT_SOURCE_DIR}/statusicon.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/statusicon.h
    ${CMAKE_CURRENT_SOURCE_DIR}/subscriptionmonitor.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/subscriptionmonitor.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/account/taskaccount.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/account/taskaccount.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/adddevice/taskadddevice.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/adddevice/taskadddevice.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/captiveportallookup/taskcaptiveportallookup.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/captiveportallookup/taskcaptiveportallookup.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/controlleraction/taskcontrolleraction.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/controlleraction/taskcontrolleraction.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/createsupportticket/taskcreatesupportticket.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/createsupportticket/taskcreatesupportticket.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/getlocation/taskgetlocation.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/getlocation/taskgetlocation.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/getsubscriptiondetails/taskgetsubscriptiondetails.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/getsubscriptiondetails/taskgetsubscriptiondetails.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/heartbeat/taskheartbeat.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/heartbeat/taskheartbeat.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/ipfinder/taskipfinder.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/ipfinder/taskipfinder.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/products/taskproducts.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/products/taskproducts.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/release/taskrelease.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/release/taskrelease.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/removedevice/taskremovedevice.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/removedevice/taskremovedevice.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/servers/taskservers.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/servers/taskservers.h
    ${CMAKE_CURRENT_SOURCE_DIR}/telemetry.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/telemetry.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tutorialvpn.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tutorialvpn.h
    ${CMAKE_CURRENT_SOURCE_DIR}/update/updater.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/update/updater.h
    ${CMAKE_CURRENT_SOURCE_DIR}/update/versionapi.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/update/versionapi.h
    ${CMAKE_CURRENT_SOURCE_DIR}/update/webupdater.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/update/webupdater.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/addon.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/addon.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/addonapi.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/addonapi.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/addonguide.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/addonguide.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/addoni18n.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/addoni18n.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/addonmessage.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/addonmessage.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/addonproperty.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/addonproperty.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/addonpropertylist.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/addonpropertylist.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/addonreplacer.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/addonreplacer.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/addontutorial.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/addontutorial.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/conditionwatchers/addonconditionwatcher.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/conditionwatchers/addonconditionwatcher.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/conditionwatchers/addonconditionwatcherfeaturesenabled.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/conditionwatchers/addonconditionwatcherfeaturesenabled.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/conditionwatchers/addonconditionwatchergroup.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/conditionwatchers/addonconditionwatchergroup.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/conditionwatchers/addonconditionwatcherjavascript.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/conditionwatchers/addonconditionwatcherjavascript.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/conditionwatchers/addonconditionwatcherlocales.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/conditionwatchers/addonconditionwatcherlocales.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/conditionwatchers/addonconditionwatchertime.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/conditionwatchers/addonconditionwatchertime.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/conditionwatchers/addonconditionwatchertimeend.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/conditionwatchers/addonconditionwatchertimestart.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/conditionwatchers/addonconditionwatchertranslationthreshold.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/conditionwatchers/addonconditionwatchertranslationthreshold.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/conditionwatchers/addonconditionwatchertriggertimesecs.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/conditionwatchers/addonconditionwatchertriggertimesecs.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/manager/addondirectory.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/manager/addondirectory.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/manager/addonindex.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/manager/addonindex.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/manager/addonmanager.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/manager/addonmanager.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/state/addonstate.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/state/addonstatebase.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/state/addonstatebase.h
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/state/addonsessionstate.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/addons/state/addonsessionstate.h
    ${CMAKE_CURRENT_SOURCE_DIR}/app.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/app.h
    ${CMAKE_CURRENT_SOURCE_DIR}/authenticationinapp/authenticationinapp.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/authenticationinapp/authenticationinapp.h
    ${CMAKE_CURRENT_SOURCE_DIR}/authenticationinapp/authenticationinapplistener.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/authenticationinapp/authenticationinapplistener.h
    ${CMAKE_CURRENT_SOURCE_DIR}/authenticationinapp/authenticationinappsession.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/authenticationinapp/authenticationinappsession.h
    ${CMAKE_CURRENT_SOURCE_DIR}/authenticationinapp/incrementaldecoder.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/authenticationinapp/incrementaldecoder.h
    ${CMAKE_CURRENT_SOURCE_DIR}/authenticationlistener.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/authenticationlistener.h
    ${CMAKE_CURRENT_SOURCE_DIR}/collator.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/collator.h
    ${CMAKE_CURRENT_SOURCE_DIR}/composer/composer.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/composer/composer.h
    ${CMAKE_CURRENT_SOURCE_DIR}/composer/composerblock.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/composer/composerblock.h
    ${CMAKE_CURRENT_SOURCE_DIR}/composer/composerblockbutton.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/composer/composerblockbutton.h
    ${CMAKE_CURRENT_SOURCE_DIR}/composer/composerblockorderedlist.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/composer/composerblockorderedlist.h
    ${CMAKE_CURRENT_SOURCE_DIR}/composer/composerblocktext.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/composer/composerblocktext.h
    ${CMAKE_CURRENT_SOURCE_DIR}/composer/composerblocktitle.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/composer/composerblocktitle.h
    ${CMAKE_CURRENT_SOURCE_DIR}/composer/composerblockunorderedlist.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/composer/composerblockunorderedlist.h
    ${CMAKE_CURRENT_SOURCE_DIR}/cryptosettings.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/cryptosettings.h
    ${CMAKE_CURRENT_SOURCE_DIR}/curve25519.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/curve25519.h
    ${CMAKE_CURRENT_SOURCE_DIR}/env.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/env.h
    ${CMAKE_CURRENT_SOURCE_DIR}/errorhandler.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/errorhandler.h
    ${CMAKE_CURRENT_SOURCE_DIR}/externalophandler.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/externalophandler.h
    ${CMAKE_CURRENT_SOURCE_DIR}/feature.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/feature.h
    ${CMAKE_CURRENT_SOURCE_DIR}/filterproxymodel.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/filterproxymodel.h
    ${CMAKE_CURRENT_SOURCE_DIR}/fontloader.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/fontloader.h
    ${CMAKE_CURRENT_SOURCE_DIR}/frontend/navigator.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/frontend/navigator.h
    ${CMAKE_CURRENT_SOURCE_DIR}/frontend/navigationbarbutton.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/frontend/navigationbarbutton.h
    ${CMAKE_CURRENT_SOURCE_DIR}/frontend/navigationbarmodel.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/frontend/navigationbarmodel.h
    ${CMAKE_CURRENT_SOURCE_DIR}/frontend/navigatorreloader.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/frontend/navigatorreloader.h
    ${CMAKE_CURRENT_SOURCE_DIR}/glean/mzglean.h
    ${CMAKE_CURRENT_SOURCE_DIR}/glean/mzglean.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/hacl-star/Hacl_Chacha20.c
    ${CMAKE_CURRENT_SOURCE_DIR}/hacl-star/Hacl_Chacha20Poly1305_32.c
    ${CMAKE_CURRENT_SOURCE_DIR}/hacl-star/Hacl_Curve25519_51.c
    ${CMAKE_CURRENT_SOURCE_DIR}/hacl-star/Hacl_Poly1305_32.c
    ${CMAKE_CURRENT_SOURCE_DIR}/hawkauth.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/hawkauth.h
    ${CMAKE_CURRENT_SOURCE_DIR}/hkdf.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/hkdf.h
    ${CMAKE_CURRENT_SOURCE_DIR}/inspector/inspectorhandler.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/inspector/inspectorhandler.h
    ${CMAKE_CURRENT_SOURCE_DIR}/inspector/inspectorhotreloader.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/inspector/inspectorhotreloader.h
    ${CMAKE_CURRENT_SOURCE_DIR}/inspector/inspectoritempicker.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/inspector/inspectoritempicker.h
    ${CMAKE_CURRENT_SOURCE_DIR}/inspector/inspectorutils.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/inspector/inspectorutils.h
    ${CMAKE_CURRENT_SOURCE_DIR}/inspector/inspectorwebsocketconnection.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/inspector/inspectorwebsocketconnection.h
    ${CMAKE_CURRENT_SOURCE_DIR}/inspector/inspectorwebsocketserver.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/inspector/inspectorwebsocketserver.h
    ${CMAKE_CURRENT_SOURCE_DIR}/ipaddress.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ipaddress.h
    ${CMAKE_CURRENT_SOURCE_DIR}/itempicker.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/itempicker.h
    ${CMAKE_CURRENT_SOURCE_DIR}/languagei18n.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/languagei18n.h
    ${CMAKE_CURRENT_SOURCE_DIR}/leakdetector.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/leakdetector.h
    ${CMAKE_CURRENT_SOURCE_DIR}/localizer.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/localizer.h
    ${CMAKE_CURRENT_SOURCE_DIR}/logoutobserver.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/logoutobserver.h
    ${CMAKE_CURRENT_SOURCE_DIR}/logger.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/logger.h
    ${CMAKE_CURRENT_SOURCE_DIR}/loghandler.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/loghandler.h
    ${CMAKE_CURRENT_SOURCE_DIR}/models/featuremodel.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/models/featuremodel.h
    ${CMAKE_CURRENT_SOURCE_DIR}/models/licensemodel.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/models/licensemodel.h
    ${CMAKE_CURRENT_SOURCE_DIR}/networkmanager.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/networkmanager.h
    ${CMAKE_CURRENT_SOURCE_DIR}/networkrequest.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/networkrequest.h
    ${CMAKE_CURRENT_SOURCE_DIR}/qmlengineholder.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/qmlengineholder.h
    ${CMAKE_CURRENT_SOURCE_DIR}/qmlpath.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/qmlpath.h
    ${CMAKE_CURRENT_SOURCE_DIR}/resourceloader.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/resourceloader.h
    ${CMAKE_CURRENT_SOURCE_DIR}/rfc/rfc1112.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/rfc/rfc1112.h
    ${CMAKE_CURRENT_SOURCE_DIR}/rfc/rfc1918.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/rfc/rfc1918.h
    ${CMAKE_CURRENT_SOURCE_DIR}/rfc/rfc4193.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/rfc/rfc4193.h
    ${CMAKE_CURRENT_SOURCE_DIR}/rfc/rfc4291.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/rfc/rfc4291.h
    ${CMAKE_CURRENT_SOURCE_DIR}/rfc/rfc5735.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/rfc/rfc5735.h
    ${CMAKE_CURRENT_SOURCE_DIR}/settingsholder.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/settingsholder.h
    ${CMAKE_CURRENT_SOURCE_DIR}/signature.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/signature.h
    ${CMAKE_CURRENT_SOURCE_DIR}/simplenetworkmanager.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/simplenetworkmanager.h
    ${CMAKE_CURRENT_SOURCE_DIR}/task.h
    ${CMAKE_CURRENT_SOURCE_DIR}/taskscheduler.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/taskscheduler.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/addon/taskaddon.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/addon/taskaddon.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/addonindex/taskaddonindex.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/addonindex/taskaddonindex.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/authenticate/taskauthenticate.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/authenticate/taskauthenticate.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/deleteaccount/taskdeleteaccount.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/deleteaccount/taskdeleteaccount.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/getfeaturelist/taskgetfeaturelist.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/getfeaturelist/taskgetfeaturelist.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/function/taskfunction.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/function/taskfunction.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/group/taskgroup.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tasks/group/taskgroup.h
    ${CMAKE_CURRENT_SOURCE_DIR}/temporarydir.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/temporarydir.h
    ${CMAKE_CURRENT_SOURCE_DIR}/theme.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/theme.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tutorial/tutorial.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tutorial/tutorial.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tutorial/tutorialstep.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tutorial/tutorialstep.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tutorial/tutorialstepbefore.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tutorial/tutorialstepbefore.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tutorial/tutorialstepnext.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tutorial/tutorialstepnext.h
    ${CMAKE_CURRENT_SOURCE_DIR}/urlopener.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/urlopener.h
    ${CMAKE_CURRENT_SOURCE_DIR}/utils.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/utils.h
    ${CMAKE_CURRENT_SOURCE_DIR}/versionutils.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/versionutils.h
    ${CMAKE_CURRENT_SOURCE_DIR}/websocket/exponentialbackoffstrategy.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/websocket/exponentialbackoffstrategy.h
    ${CMAKE_CURRENT_SOURCE_DIR}/websocket/pushmessage.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/websocket/pushmessage.h
    ${CMAKE_CURRENT_SOURCE_DIR}/websocket/websockethandler.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/websocket/websockethandler.h
)

# VPN Client UI resources
target_sources(mozillavpn-sources INTERFACE
    ${CMAKE_CURRENT_SOURCE_DIR}/ui/resources.qrc
    ${CMAKE_CURRENT_SOURCE_DIR}/ui/ui.qrc
    ${CMAKE_CURRENT_SOURCE_DIR}/resources/certs/certs.qrc
    ${CMAKE_CURRENT_SOURCE_DIR}/resources/public_keys/public_keys.qrc
    ${CMAKE_CURRENT_SOURCE_DIR}/resources/license.qrc
    ${CMAKE_CURRENT_SOURCE_DIR}/resources/resources.qrc
)

# Signal handling for unix platforms
if(UNIX)
     target_sources(mozillavpn-sources INTERFACE
        ${CMAKE_CURRENT_SOURCE_DIR}/signalhandler.cpp
        ${CMAKE_CURRENT_SOURCE_DIR}/signalhandler.h
     )
endif()

# Sources for desktop platforms.
if(NOT CMAKE_CROSSCOMPILING)
     target_sources(mozillavpn-sources INTERFACE
        ${CMAKE_CURRENT_SOURCE_DIR}/tasks/authenticate/desktopauthenticationlistener.cpp
        ${CMAKE_CURRENT_SOURCE_DIR}/tasks/authenticate/desktopauthenticationlistener.h
       )
endif()

if(${CMAKE_SYSTEM_NAME} STREQUAL "Linux" OR
   ${CMAKE_SYSTEM_NAME} STREQUAL "Windows" OR
   ${CMAKE_SYSTEM_NAME} STREQUAL "Darwin")
    # Compile and link the signature library.
    include(${CMAKE_SOURCE_DIR}/scripts/cmake/rustlang.cmake)
    add_rust_library(signature
        PACKAGE_DIR ${CMAKE_SOURCE_DIR}/signature
        BINARY_DIR ${CMAKE_CURRENT_BINARY_DIR}
        CRATE_NAME signature
    )
    target_compile_definitions(mozillavpn-sources INTERFACE MZ_SIGNATURE)
    target_link_libraries(mozillavpn-sources INTERFACE signature)
endif()

# Sources for desktop platforms.
if(NOT CMAKE_CROSSCOMPILING)
     target_sources(mozillavpn-sources INTERFACE
        ${CMAKE_CURRENT_SOURCE_DIR}/systemtraynotificationhandler.cpp
        ${CMAKE_CURRENT_SOURCE_DIR}/systemtraynotificationhandler.h
        ${CMAKE_CURRENT_SOURCE_DIR}/server/serverconnection.cpp
        ${CMAKE_CURRENT_SOURCE_DIR}/server/serverconnection.h
        ${CMAKE_CURRENT_SOURCE_DIR}/server/serverhandler.cpp
        ${CMAKE_CURRENT_SOURCE_DIR}/server/serverhandler.h
       )
endif()

include(${CMAKE_CURRENT_SOURCE_DIR}/cmake/sentry.cmake)
include(${CMAKE_CURRENT_SOURCE_DIR}/platforms/${MZ_PLATFORM_NAME}/sources.cmake)
