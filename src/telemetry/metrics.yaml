# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

# This file contains metrics definitions for metrics collected by the
# Mozilla VPN application using only the qtglean integration.

---
$schema: moz://mozilla.org/schemas/glean/metrics/2-0-0

# "impression" category events, are events where the user has just moved on to page X
# Events under this category are recorded when a new screen is loaded
impression:
  signup_screen:
        type: event
        lifetime: ping
        send_in_pings:
            - main
        description: |
            The user has entered the "Sign up" screen.
        bugs:
            - https://mozilla-hub.atlassian.net/browse/VPN-5251
        data_reviews:
            - TODO
        data_sensitivity:
            - interaction
        notification_emails:
            - vpn-telemetry@mozilla.com
            - brizental@mozilla.com
        expires: never
        extra_keys:
            screen:
                description: |
                    The screen where the interaction happened
                type: string
  enter_email_screen:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The user has entered the "Enter email" screen.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  create_password_screen:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The user has entered the "Create password" screen.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  enter_verification_code_screen:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The user has entered the screen to enter email verification code.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  enter_password_screen:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The user has entered the "Enter password" screen.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  enter_security_code_screen:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The user has entered the screen to enter a TOTP security code.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  subscription_needed_screen:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The user has entered the "Subscription needed" screen.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  confirming_subscription_screen:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The user has entered the "Confirming subscription" screen.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  continue_in_browser_screen:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The user has entered the "Continue in browser" screen.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  speed_test_results_loading:
    no_lint:
      - COMMON_PREFIX
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has just moved on to the screen that shows
      the loading animation for the speed test results
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-5366
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/8060#issuecomment-1724272061
    data_sensitivity:
      - interaction
    notification_emails:
      - brizental@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys: &impression_extra_keys
      screen:
        description: The id of the screen the user is on
        type: string
      action:
        description: The type of action the user has performed
        type: string
  speed_test_result_completed:
    no_lint:
      - COMMON_PREFIX
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has just moved on to the screen that shows
      the speed test results
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-5366
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/8060#issuecomment-1724272061
    data_sensitivity:
      - interaction
    notification_emails:
      - brizental@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys: *impression_extra_keys
  speed_test_result_error:
    no_lint:
      - COMMON_PREFIX
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has just moved on to the screen that shows
      the speed test results
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-5366
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/8060#issuecomment-1724272061
    data_sensitivity:
      - interaction
    notification_emails:
      - brizental@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys: *impression_extra_keys
  connection_info_opened:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has just moved on to the screen that shows
      the connection information
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-5366
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/8060#issuecomment-1724272061
    data_sensitivity:
      - interaction
    notification_emails:
      - brizental@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys: *impression_extra_keys

# "interaction" category events represent an interaction of the user with the VPN UI
interaction:
  get_help_selected:
        type: event
        lifetime: ping
        send_in_pings:
            - main
        description: |
            The "Get help" link was clicked.
        bugs:
            - https://mozilla-hub.atlassian.net/browse/VPN-5251
        data_reviews:
            - TODO
        data_sensitivity:
            - interaction
        notification_emails:
            - vpn-telemetry@mozilla.com
            - brizental@mozilla.com
        expires: never
        extra_keys:
            screen:
                description: |
                    The screen where the interaction happened
                type: string
  signup_selected:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The "Sign up" button was clicked.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  already_a_subscriber:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The "Already a subscriber" button was clicked.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  back_selected:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The back arrow button was clicked.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  continue_selected:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The "Continue" button was clicked in one of the auth screens.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  change_email_selected:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The "Change email" button was clicked.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  paste_password_selected:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The "Paste" button was clicked on the password input.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  create_account_selected:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The "Create account" button was clicked.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  privacy_notice_selected:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The "Privacy notice" button was clicked.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  terms_of_service_selected:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The "Terms of Service" button was clicked.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  close_selected:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The "Close" button was clicked. This may happen in multiple places in code.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  verify_selected:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The "Verify" button was clicked in one of the security code verification screens.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  resend_code_selected:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The "Resend code" button was clicked in one of the security code verification screens.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  cancel_selected:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          A "cancel" button was clicked.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  sign_in_selected:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          A "Sign in" button was clicked.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  forgot_your_password_selected:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The "Forgot your password?" button was clicked.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  subscribe_now_selected:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The "Subscribe now" button was clicked.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  sign_out_selected:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The "Sign out" button was clicked.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
      extra_keys:
          screen:
              description: |
                  The screen where the interaction happened
              type: string
  connection_info_closed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has clicked the button that closes
      the connection information modal
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-5366
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/8060#issuecomment-1724272061
    data_sensitivity:
      - interaction
    notification_emails:
      - brizental@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys: &interaction_extra_keys
      <<: *impression_extra_keys
      element_id:
        description: The id of the element the user has interacted with
        type: string

  connection_info_opened:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has clicked the button that opens
      the connection information modal
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-5366
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/8060#issuecomment-1724272061
    data_sensitivity:
      - interaction
    notification_emails:
      - brizental@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys: *interaction_extra_keys

  speed_test_triggered:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has clicked on the button that triggers the speed test
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-5366
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/8060#issuecomment-1724272061
    data_sensitivity:
      - interaction
    notification_emails:
      - brizental@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys: *interaction_extra_keys

  speed_test_closed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has clicked on the button that closes the speed tests
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-5366
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/8060#issuecomment-1724272061
    data_sensitivity:
      - interaction
    notification_emails:
      - brizental@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys: *interaction_extra_keys

  speed_test_refresh:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has clicked on the button to refresh the
      speed test results
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-5366
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/8060#issuecomment-1724272061
    data_sensitivity:
      - interaction
    notification_emails:
      - brizental@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys: *interaction_extra_keys

# "outcome" category metrics record the outcome of some user action
outcome:
  login_started:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The user has started the login process.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
  registration_started:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The user has started the registration process.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
  two_fa_verification_failed:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The user has just failed the 2FA process.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
  two_fa_verification_succeeded:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The user has just succeeded in the 2FA process.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
  login_ended:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The user has just completed the login process.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
  registration_completed:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The user has just completed the registration process.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
  subscription_started:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The user has just started the subscription process.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
  subscription_completed:
      type: event
      lifetime: ping
      send_in_pings:
          - main
      description: |
          The user has just completed the subscription process.
      bugs:
          - https://mozilla-hub.atlassian.net/browse/VPN-5251
      data_reviews:
          - TODO
      data_sensitivity:
          - interaction
      notification_emails:
          - vpn-telemetry@mozilla.com
          - brizental@mozilla.com
      expires: never
  speed_test_completed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      A speed test has just been completed,
      this is a backend event and does not necessarily
      mean the user has seen the speed test completed screen.
      For that, there is the impression.speed_test_result_completed event.
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-5366
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/8060#issuecomment-1724272061
    data_sensitivity:
      - technical
    notification_emails:
      - brizental@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      speed:
        description: |
          The speed bucket that the test resulted in, or if problem occurred:
          Slow | Medium | Fast | Cancelled | Error
        type: string
      outcome: &outcome_extra_key
        description: The outcome of a given feature
        type: string

sample:
  addon_cta_clicked:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      User clicked primary CTA in an addon
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/4487
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1794825
    data_sensitivity:
      - interaction
    extra_keys:
      addon_id:
        description: Addon identifier
        type: string
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  addon_message_state_changed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The addon message' state changed
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/4487
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1794825
    data_sensitivity:
      - technical
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      message_id:
        description: |
          Addon identifier
        type: string
      message_state:
        description: |
          Received, Notified, Read, or Dismissed
        type: string

  addon_state_changed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      An addon's state changed
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/4487
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1794825
    data_sensitivity:
      - technical
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      addon_id:
        description: |
          Addon identifier
        type: string
      state:
        description: |
          Installed, Enabled, or Disabled
        type: string

  authentication_acnt_del_step:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has advanced in the authentication flow for the account deletion.
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/2956
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1774568
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      state:
        description: |
          The name of the authentication state, e.g. "sign-in", "sign-out",
          "totp", etc. The list of states can be found in
          `authenticationinapp.h`.
        type: string

  authentication_error:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user is shown an error while authenticating in the app.
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-3630
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/5702#issuecomment-1397761161
    data_sensitivity:
      - interaction
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      reason:
        description: |
          The error shown: Timeout | IncorrectPassword | InvalidEmail |
          InvalidOrExpiredVerificiationCode | InvalidTOTP | InvalidUnblockCode
        type: string

  authentication_inapp_error:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The authentication in app has failed for a non-handled FxA error.
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/2956
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1759345
    data_sensitivity:
      - technical
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      errno:
        description: The FxA error number
        type: string
      validation:
        description: Extra validation string for errno 107
        type: string
      verificationmethod:
        description: Verification method to be used for errno 125
        type: string
      error:
        description: Error string
        type: string
      message:
        description: Extra error message
        type: string

  authentication_inapp_step:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has advanced in the authentication flow.
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/2956
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1759345
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      state:
        description: |
          The name of the authentication state, e.g. "sign-in", "sign-out",
          "totp", etc. The list of states can be found in
          `authenticationinapp.h`.
        type: string

  authentication_sub_manage_step:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has advanced in the authentication flow for the
      subscription management.
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/2956
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1774568
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      state:
        description: |
          The name of the authentication state, e.g. "sign-in", "sign-out",
          "totp", etc. The list of states can be found in
          `authenticationinapp.h`.
        type: string

  bottom_navigation_bar_click:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has tapped a bottom navigation bar button.
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-3630
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/5702#issuecomment-1397761161
    data_sensitivity:
      - interaction
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      bar_button:
        description: |
          The name of the bar button tapped:
          ScreenMessaging | ScreenHome | ScreenSettings | Unknown
        type: string

  delete_account_clicked:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has clicked the “delete account” button from the
      account deletion view.
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/3627
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1774568
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  guide_opened:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has opened a guide from the tips and tricks page
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-2292
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1776499
    data_sensitivity:
      - interaction
    notification_emails:
      - mlichtenstein@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      id:
        description: |
          The id of the guide that was opened
        type: string

  guide_closed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has closed a guide from the tips and tricks page
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-2292
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1776499
    data_sensitivity:
      - interaction
    notification_emails:
      - mlichtenstein@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      id:
        description: |
          The id of the guide that was closed
        type: string
      duration_ms:
        description: |
          The amount of time that the user spent in the guide (in seconds)
        type: quantity
        unit: milliseconds

  error_alert_shown:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      A generic error alet is shown.
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-3320
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/5525
    data_sensitivity:
      - technical
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      task:
        description: The name of the task that has generated this error.
        type: string
      filename:
        description: |
          The filename that has triggered the error
        type: string
      linenumber:
        description: |
          The line number where the error has been triggered
        type: quantity

  non_default_language_used:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has chosen a default language.
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-3742
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/5525
    data_sensitivity:
      - technical
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      language_code:
        description: The language code chosen.
        type: string

  push_message_received:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      A device has been removed from the user's account.
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/3982
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/4275#issuecomment-1228532390
    data_sensitivity:
      - technical
    notification_emails:
      - brizental@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: 2023-12-31
    extra_keys:
      type:
        description: |
          The message type.
        type: string

  tutorial_aborted:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has aborted a tutorial
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-2292
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1776499
    data_sensitivity:
      - interaction
    notification_emails:
      - mlichtenstein@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      id:
        description: |
          The id of the tutorial that was aborted
        type: string

  tutorial_completed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has completed a tutorial
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-2292
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1776499
    data_sensitivity:
      - interaction
    notification_emails:
      - mlichtenstein@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      id:
        description: |
          The id of the tutorial that was completed
        type: string

  tutorial_started:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has started a tutorial
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-2292
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1776499
    data_sensitivity:
      - interaction
    notification_emails:
      - mlichtenstein@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      id:
        description: |
          The id of the tutorial that was started
        type: string

  tutorial_step_viewed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has viewed a step in a tutorial
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-2292
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1776499
    data_sensitivity:
      - interaction
    notification_emails:
      - mlichtenstein@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      tutorial_id:
        description: |
          The id of the tutorial in progress
        type: string
      step_id:
        description: |
          The id of the step that was viewed
        type: string

  android_daemon_status:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      A status report of the Android Daemon. Contains information
      if the daemon' connection health component.
      This will help us understand if that component did activate,
      and if so if it did help fix the connection.
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-3743
    data_reviews:
      - TODO
    data_sensitivity:
      - technical
    notification_emails:
      - sstreich@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: 2024-01-01
    extra_keys:
      connection_health_state:
        description: |
          The State of connection health. Possible values are:
          deactivated-feature-flagged -> deactive due A/B testing.
          deactivated -> vpn disconnected
          active-not-silent-switched -> connection is healthy
          active-silent-switched -> connection was unhealthy
          active-panic-state-reached -> connection was unhealthy
        type: string

  iap_g_no_sku_details:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      There was an attempt to initiate a purchase without an SKU
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/1620
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1746457
    data_sensitivity:
      - technical
    notification_emails:
      - sstreich@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  iap_g_launchbillingflow_failed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The billing client failed to launch the billing Flow
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/1620
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1746457
    data_sensitivity:
      - technical
    notification_emails:
      - sstreich@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  iap_g_unexpected_purchasestate:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The client encountered an unexpected non-purchased product
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/1620
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1746457
    data_sensitivity:
      - technical
    notification_emails:
      - sstreich@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  iap_g_sku_without_month:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      Google play did not send a monthCount for a sku
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/1620
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1746457
    data_sensitivity:
      - technical
    notification_emails:
      - sstreich@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  iap_g_query_purchases_failed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The billing client failed to fetch purchases
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/1620
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1746457
    data_sensitivity:
      - technical
    notification_emails:
      - sstreich@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  iap_g_query_sku_details_failed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The billing client failed to fetch the SkuDetails
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/1620
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1746457
    data_sensitivity:
      - technical
    notification_emails:
      - sstreich@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  iap_g_billing_not_available:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The Billing Client was not able to setup itself
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/1620
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1746457
    data_sensitivity:
      - technical
    notification_emails:
      - sstreich@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  iap_g_purchases_updated_failed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      Encountered an error while processing incoming purchase updates
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/1620
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/3754
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1746457
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1774433
    data_sensitivity:
      - technical
    notification_emails:
      - sstreich@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      reason:
        description: |
          The reason of the failure. It can be:
          "item-already-owned","user-canceled","item-unavailable"
          "unknown-$someInteger" in case an unhandled error is added by google.
        type: string

  iap_g_purchases_update_is_null:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      Got a "null" response while fetching purchase updates
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/1620
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1746457
    data_sensitivity:
      - technical
    notification_emails:
      - sstreich@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  iap_g_purchase_ack_failed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The billing client failed to acknowledge the purchase
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/1620
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1746457
    data_sensitivity:
      - technical
    notification_emails:
      - sstreich@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  app_permissions_view_opened:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has opened the app permissions view
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123#c1
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  authentication_aborted:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has aborted the authentication flow.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123#c1
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  authentication_completed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has completed the authentication flow.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123#c1
    data_sensitivity:
      - technical
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  authentication_failure:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The authentication flow has terminated with an error
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123#c1
    data_sensitivity:
      - technical
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  authentication_failure_by_geo:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The authentication flow has terminated with a geo-restriction error
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123#c1
    data_sensitivity:
      - technical
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  authentication_started:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has started the authentication flow.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123#c1
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  backend_failure_viewed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has been shown the "Something went wrong…" error view.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123#c1
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  connection_health_no_signal:
    type: event
    lifetime: ping
    send_in_pings:
      - main
      - vpnsession
      - daemonsession
    description: |
      The connection has no signal.

      This event is recorded in both main application and daemon.
      The logic and cadence of health checks for each of these
      is not the same. On the daemon this checks are only
      done on the Android daemon and not on the iOS network extension.

      A no signal event event happens when the connection is showing issues,
      and a silent switch will not address the issue. On when the connection
      is showing issues and there have been previous silent switches which
      did not address the issue.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123#c1
    data_sensitivity:
      - technical
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  connection_health_unstable:
    type: event
    lifetime: ping
    send_in_pings:
      - main
      - vpnsession
      - daemonsession
    description: |
      The connection is unstable.

      This event is recorded in both main application and daemon.
      The logic and cadence of health checks for each of these
      is not the same. On the daemon this checks are only
      done on the Android daemon and not on the iOS network extension.

      An unstable event happens when the connection is showing issues,
      but a silent switch may still address the issue and no previous
      silent switches have happened yet.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123#c1
    data_sensitivity:
      - technical
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  get_help_clicked_initialize:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has clicked "Get help" from the initial view.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123#c1
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  get_help_clicked_view_settings:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has clicked "Get help" from the settings view
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123#c1
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  manage_account_clicked:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has clicked the `manage account` button
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123#c1
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  max_device_reached:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      Device limit reached
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123#c1
    data_sensitivity:
      - technical
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  notifications_view_opened:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has opened the notifications view
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123#c1
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  onboarding_cta_click:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      User initiates authentication process from mobile onboarding
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/2545
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1759345
    data_sensitivity:
      - interaction
    expires: never
    extra_keys:
      panel_id:
        description: Panel content identifier
        type: string
      panel_idx:
        description: Panel position in onboarding stack
        type: string
      panel_cta:
        description: Element that was clicked to trigger auth
        type: string
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com

  settings_view_opened:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has opened the settings
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123#c1
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  subscription_blocked_viewed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has viewed an error message after attempting to subscribe
      with an Apple / Google Play ID that already has a subscription.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1711123#c1
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  sub_not_validated_viewed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has viewed an error message after attempting to subscribe
      through Google Play store, but the validation could not be completed.
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/1541
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1759345
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  billing_not_available_viewed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has viewed an error message after attempting to subscribe
      through Google Play store, but the billing service is not availble.
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/1541
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1759345
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  dns_settings_view_opened:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has viewed the advanced DNS Settings
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/1242
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1759345
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  iap_subscription_started:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has started the subscription flow in app
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/2956
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/3754
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1759345
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1774433
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      sku:
        description: |
          The sku of the started Subscription
        type: string

  iap_restore_sub_started:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has started the subscription flow in app
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/2956
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1759345
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  iap_subscription_failed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has completed the subscription flow in app
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/2956
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/3754
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1759345
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1774433
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      error:
        description: |
          The reason of the failure. It can be "billing-not-available",
          "canceled" or "failed"
        type: string
      sku:
        description: |
          The sku of the failed Subscription
        type: string

  iap_subscription_completed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has completed the subscription flow in app
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/2956
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/3754
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1759345
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1774433
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      sku:
        description: |
          The sku of the completed Subscription
        type: string

  connectivity_handshake_timeout:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The connection handshake with the VPN server is taking too long, and has
      timed out.
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-1595
      - https://mozilla-hub.atlassian.net/browse/VPN-2279
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1759345
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1774439
    data_sensitivity:
      - technical
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      server:
        description: |
          The mullvad server public key and the connection latency, packet
          loss, stddev.
        type: string
      transport:
        description: The Host network type (i.e wifi or 4g)
        type: string

  connectivity_stable:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The connection has been stable for more than 10 seconds after the
      activation
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-1595
      - https://mozilla-hub.atlassian.net/browse/VPN-2279
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1759345
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1774439
    data_sensitivity:
      - technical
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      server:
        description: The mullvad server public key
        type: string
      latency:
        description: Server response latency
        type: string
      loss:
        description: Number of package loss
        type: string
      stddev:
        description: Standard deviation of the ping responses
        type: string
      transport:
        description: The Host network type (i.e wifi or 4g)
        type: string

  server_unavailable_error:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      A "Server unavailable" error has occured.
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/4589
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/4594#issuecomment-1271601927
    data_sensitivity:
      - technical
    notification_emails:
      - brizental@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  app_step:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The application state flow (authenticating, subscribing, main, etc).
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/3411
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1767028
    data_sensitivity:
      - technical
    notification_emails:
      - brizental@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      <<: *impression_extra_keys
      state:
        description: |
          The name of the app state, e.g. "authenticating", "device-limit",
          "main", "subscription-needed", etc. The complete list is
          `app.h`'s `State` enum along with the `CustomState` enum in the
          app's header file (e.g. `mozillavpn.h`).
        type: string

  controller_step:
    type: event
    lifetime: ping
    send_in_pings:
      - main
      - vpnsession
    description: |
      The controller state flow (off, connecting, switching, etc).
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/3449
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1770530
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      state:
        description: |
          The name of the controller state, e.g. "off", "connecting",
          "switching", etc. The list can be found in `controller.h`.
        type: string

  controller_state_on:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      Controller state is on.
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/2643
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1773423
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  controller_state_off:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      Controller state is off. It is important to note that mobile reports of
      this event are likely to be unreliable because they come from an
      non-active background process which is not guaranteed to be alive.
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/2643
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1773423
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  update_step:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The update flow (update required available, installer started, etc)
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/3455
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1770531
    data_sensitivity:
      - technical
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      state:
        description: |
          The name of the update states. The list can be found in `updater.h`.
        type: string

  unhandled_sub_plan_interval:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      Unhandled subscription plan interval from the
      subscription management view.
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/3627
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1774568
    data_sensitivity:
      - technical
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      interval:
        description: |
          Unhandled interval
        type: string
      interval_count:
        description: |
          Unhandled interval count
        type: quantity
        unit: months

  profile_flow_state_changed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The profile flow state changed.
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/3627
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1774568
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      state:
        description: |
          The name of the profile flow state. The list of states can be found in
          `profileflow.h`.
        type: string

  manage_subscription_clicked:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has clicked the “manage subscription” button from the
      profile view.
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/3627
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1774568
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  delete_account_requested:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has clicked the “delete account” button from the profile view.
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/3627
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1774568
    data_sensitivity:
      - interaction
    notification_emails:
      - amarchesini@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  tips_and_tricks_view_opened:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has opened the tips and tricks page
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-2292
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1776499
    data_sensitivity:
      - interaction
    notification_emails:
      - mlichtenstein@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  tips_and_tricks_modal_shown:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has been shown the tips and tricks introduction modal
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-2292
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1776499
    data_sensitivity:
      - interaction
    notification_emails:
      - mlichtenstein@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  tips_and_tricks_modal_closed:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user has dismissed the tips and tricks introduction modal
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-2292
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1776499
    data_sensitivity:
      - interaction
    notification_emails:
      - mlichtenstein@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      action:
        description: |
          The trigger that caused the modal to be closed (dismissed | cta)
        type: string

  user_changed_endpoint_geo:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      User changed the geography (city, or cities if multihop) of the endpoint
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-3630
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/5702#issuecomment-1397761161
    data_sensitivity:
      - interaction
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    extra_keys:
      server:
        description: |
          Which server changed:
          multiHopEntryServer | multiHopExitServer | singleHopServer
        type: string

  help_menu_help_center_opened:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user selected the help center option within the help menu
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-3630
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/5702#issuecomment-1397761161
    data_sensitivity:
      - interaction
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  help_contact_support_opened:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user selected the contact support option within the help menu
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-3630
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/5702#issuecomment-1397761161
    data_sensitivity:
      - interaction
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  support_case_submitted:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user submitted a support case
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-3630
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/5702#issuecomment-1397761161
    data_sensitivity:
      - interaction
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  help_menu_view_logs_opened:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user selected the view logs option within the help menu
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-3630
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/5702#issuecomment-1397761161
    data_sensitivity:
      - interaction
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  settings_about_us_opened:
    type: event
    lifetime: ping
    send_in_pings:
      - main
    description: |
      The user selected the about us option within the settings menu
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-3630
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/5702#issuecomment-1397761161
    data_sensitivity:
      - interaction
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

performance:
  time_to_main_screen:
    type: timing_distribution
    description: |
      The time the app took between starting and rendering the main screen.
    bugs:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/issues/4486
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/5529#pullrequestreview-1253522353
    data_sensitivity:
      - technical
    notification_emails:
      - brizental@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
    time_unit: microsecond

settings:
  connect_on_startup_active:
    type: boolean
    lifetime: ping
    description: |
      The status of whether the VPN is activated on device start
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-4069
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/5702#issuecomment-1397761161
    send_in_pings:
      - main
    data_sensitivity:
      - interaction
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  using_system_language:
    type: boolean
    lifetime: ping
    description: |
      Status of whether app is being used in language of the operating system
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-4068
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/5702#issuecomment-1397761161
    send_in_pings:
      - main
    data_sensitivity:
      - interaction
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

session:
  session_start:
    type: datetime
    description: |
      The time the user starts a VPN session from the app
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-4064
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/5702#issuecomment-1397761161
    send_in_pings:
      - vpnsession
    data_sensitivity:
      - interaction
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  session_end:
    type: datetime
    description: |
      The time the user ends a VPN session from the app
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-4064
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/5702#issuecomment-1397761161
    send_in_pings:
      - vpnsession
    data_sensitivity:
      - interaction
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  session_id:
    type: uuid
    lifetime: user
    description: |
      A unique identifier for each session. This is used to connect unique VPN
      sessions across pings, and as a safety check on edge cases of VPN
      activation/deactivation, such as a session being started/ended from mobile
      system settings.
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-4064
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/6303#pullrequestreview-1359040451
    send_in_pings:
      - vpnsession
    data_sensitivity:
      - interaction
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  installation_id:
    type: uuid
    lifetime: user
    description: |
      A unique identifier to connect the app and daemon Glean instances.
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-4712
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/7581#pullrequestreview-1544692201
    send_in_pings:
      - vpnsession
      - daemonsession
    data_sensitivity:
      - technical
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  dns_type:
    type: string
    description: |
      The type of DNS a user has active:
      - NoCustomDNSAvailable: Custom DNS app feature isn't available
      - Default: App's default DNS server
      - Custom: User has provided a custom valid IP address for their DNS
      - BlockAds: One of app's privacy DNS options
      - BlockTrackers: One of app's privacy DNS options
      - BlockAdsAndTrackers: One of app's privacy DNS options
      - BlockMalware: One of app's privacy DNS options
      - BlockMalwareAndAds: One of app's privacy DNS options
      - BlockMalwareAndTrackers: One of app's privacy DNS options
      - BlockMalwareAndAdsAndTrackers: One of app's privacy DNS options
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-3630
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/5702#issuecomment-1397761161
    send_in_pings:
      - vpnsession
    data_sensitivity:
      - interaction
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  apps_excluded:
    type: quantity
    unit: apps
    description: |
      The number of apps the user is excluding from the VPN tunnel
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-4066
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/5702#issuecomment-1397761161
    send_in_pings:
      - vpnsession
    data_sensitivity:
      - interaction
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  connection_health_stable_count:
    type: counter
    lifetime: ping
    send_in_pings:
      - vpnsession
      - daemonsession
    description: |
      Count of times that the connection health check succeeds.
      Collected only on mobile apps.
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-4700
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/6783#pullrequestreview-1407551157
    data_sensitivity:
      - technical
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  daemon_session_start:
    type: datetime
    description: |
      (Mobile-only) The time the user starts a VPN session from the daemon or network extension
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-4038
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/7513#pullrequestreview-1529674762
    send_in_pings:
      - daemonsession
    data_sensitivity:
      - interaction
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  daemon_session_end:
    type: datetime
    description: |
      (Mobile-only) The time the user ends a VPN session from the daemon or network extension
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-4038
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/7513#pullrequestreview-1529674762
    send_in_pings:
      - daemonsession
    data_sensitivity:
      - interaction
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  daemon_session_id:
    type: uuid
    lifetime: user
    description: |
      (Mobile-only) A unique identifier for each session. This is used to connect
      unique VPN sessions across pings, and as a safety check on edge cases of VPN
      activation/deactivation, such as a session being started/ended from mobile
      system settings.
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-4038
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/7513#pullrequestreview-1529674762
    send_in_pings:
      - daemonsession
    data_sensitivity:
      - interaction
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never

  daemon_session_source:
    type: string
    description: |
      (Mobile-only) Where the VPN session started from, to determine how many sessions
      start outside the app. Values should be "app" or "system". "system" covers
      cases like system settings, autostart on boot, tile, etc.
    bugs:
      - https://mozilla-hub.atlassian.net/browse/VPN-4038
    data_reviews:
      - https://github.com/mozilla-mobile/mozilla-vpn-client/pull/7513#pullrequestreview-1529674762
    send_in_pings:
      - daemonsession
    data_sensitivity:
      - interaction
    notification_emails:
      - mcleinman@mozilla.com
      - vpn-telemetry@mozilla.com
    expires: never
